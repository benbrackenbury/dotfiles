#!/usr/bin/env bash

ignored_files=(
  'bin'
  'backup'
  'zsh-plugins'
  'packages'
)

echo "Ejecting dotfiles"
echo
for file in "$HOME/dotfiles"/*; do
  basename_file="${file##*/}"
  if [[ ${ignored_files[@]} =~ $basename_file ]]; then
    break
  fi
  if [ -L "$HOME/.$basename_file" ]; then
    rm "$HOME/.$basename_file"
    cp -r "$file" "$HOME/.$basename_file"
    echo "Ejected ~/.$basename_file"
    echo 
  fi
done
echo "Done"
