#!/usr/bin/env bash
# macOS Dock backup and restore utility


if [ "$(uname)" != "Darwin" ]; then
    echo "The dock backup and restorre utility only works on macOS"
    exit 1
fi

backup() {
    cp ~/Library/Preferences/com.apple.dock.plist ~/dotfiles/backup/macos/com.apple.dock.plist
    echo -e "Backed up dock to $HOME/backups/macos/com.apple.dock.plist\n"
}

restore() {
    sudo cp ~/dotfiles/backup/macos/com.apple.dock.plist ~/Library/Preferences/com.apple.dock.plist 
    echo -e "Restored dock from $HOME/backups/macos/com.apple.dock.plist\n"
}

reset() {
    backup
    sudo rm ~/Library/Preferences/com.apple.dock.plist 
    echo -e "Reset dock to macOS default\n"
}

case "$1" in
    backup)
        backup
        ;;
    restore)
        restore
        ;;
    reset)
        reset
        ;;
    *)
        echo "Usage: $0 {backup|restore|reset}"
        exit 1
        ;;
esac

killall Dock
